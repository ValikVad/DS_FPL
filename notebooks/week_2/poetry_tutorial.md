# Введение в Poetry: Управление зависимостями Python проекта

`Poetry` — это инструмент для управления зависимостями и публикации пакетов в Python. Он помогает организовать ваш проект, автоматизировать процессы установки библиотек и создания виртуальных окружений. Этот туториал поможет вам начать работу с `Poetry`.

---

## Установка Poetry

1. **Unix-like системы:**
    https://python-poetry.org/docs/
2. **Windows :**
    https://github.com/orgs/python-poetry/discussions/7035


---

## Создание нового проекта

1. **Создайте новый проект**:
   Чтобы создать новый проект, используйте команду `new`:

   ```bash
   poetry new my_project
   ```

   Это создаст новую директорию `my_project` с базовой структурой:

   ```
   my_project/
   ├── my_project/  # Ваш код будет здесь
   ├── pyproject.toml  # Файл конфигурации
   ├── README.md
   └── tests/  # Директория для тестов
   ```

2. **Инициализация существующего проекта**:
   Если у вас уже есть проект, перейдите в его директорию и выполните:

   ```bash
   poetry init
   ```

   Эта команда задаст вопросы о вашем проекте (например, название, версия Python и зависимости) и создаст файл `pyproject.toml`.

---

## Управление зависимостями

### Добавление зависимостей

Чтобы добавить библиотеку в проект, используйте команду `add`:

```bash
poetry add requests
```

Если библиотека нужна только для разработки (например, для тестирования), используйте флаг `--dev`:

```bash
poetry add --dev pytest
```

### Удаление зависимостей

Чтобы удалить библиотеку из проекта:

```bash
poetry remove requests
```

### Просмотр зависимостей

Чтобы посмотреть все зависимости вашего проекта:

```bash
poetry show
```

Для детального просмотра конкретной библиотеки:

```bash
poetry show requests
```

---

## Работа с виртуальным окружением

`Poetry` автоматически создает и управляет виртуальным окружением для вашего проекта.

1. **Активация виртуального окружения**:
   Перед работой с проектом активируйте его виртуальное окружение:

   ```bash
   poetry shell
   ```

   Теперь все команды будут выполняться в контексте вашего проекта.

2. **Выполнение команд без активации**:
   Если не хотите активировать окружение, используйте префикс `poetry run`:

   ```bash
   poetry run python my_script.py
   ```

3. **Просмотр текущего окружения**:
   Чтобы узнать, где находится виртуальное окружение:

   ```bash
   poetry env info
   ```

---

## Создание и публикация пакета

1. **Сборка пакета**:
   Чтобы собрать ваш проект в формате `.whl` или `.tar.gz`, выполните:

   ```bash
   poetry build
   ```

2. **Публикация пакета**:
   Чтобы опубликовать ваш пакет на PyPI, выполните:

   ```bash
   poetry publish
   ```

   Перед публикацией убедитесь, что у вас есть учетная запись на PyPI и она настроена в Poetry.

---

## Полезные команды

- **Обновление зависимостей**:
  ```bash
  poetry update
  ```

- **Экспорт зависимостей в `requirements.txt`**:
  ```bash
  poetry export -f requirements.txt --output requirements.txt
  ```

- **Удаление виртуального окружения**:
  ```bash
  poetry env remove
  ```

---

## Заключение

`Poetry` — мощный инструмент для управления зависимостями и организации Python проектов. Он упрощает процесс установки библиотек, работы с виртуальными окружениями и публикации пакетов. Начните использовать `Poetry` прямо сейчас, чтобы сделать ваш workflow более эффективным!

Если у вас возникнут вопросы, не стесняйтесь обращаться к документации: [https://python-poetry.org/docs/](https://python-poetry.org/docs/)
[https://habr.com/ru/articles/593529/](полезная статья на Habr)